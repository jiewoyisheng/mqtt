


控制报文格式
=
###mqtt控制报文的结构

- fixed header 固定报头，所有控制报文都包含
- variable header 可变报头 部分控制报文包含
- payload 有效载荷，部分控制报文包含

###固定报头

|    bit       |    7-4        |3-0             |
| :----------  | :--------     |-----------:    |
|  byte1       |控制报文的类型   | 控制报文类型标志位|
|  byte2       |剩余长度                         |

####控制报文的类型

|    名字  | 值|报文流动的方向      |dasd      |
|  :----  | --|  :---------     | :---------|
|Reserved    |0 |禁止             |保留|
|CONNECT     |1 |客户端到服务器   |客户端请求服务器|
|CONNACK     |2|服务器到客户端    |连接保温确认|
|PUBLISH     |3|连个方向都允许   |发布消息|
|PUBACK      |4|两个方向都允许   |qos1消息发布收到确认|
|PUBREC  |5|两个方向都允许|布收到（保证交付第一步|
|PUBREL|6|两个方向都允许|发布释放（保证交付第二步）|
|PUBCOMP|7|两个方向都允许|qos2消息发布完成（保证交互第三步|
|SUBSCRIBE|8|客户端到服务器|客户端订阅请求|
|SUBACK|9|服务器到客户端|订阅请求报文确认|
|UNSUBSCRIBE|10|客户端到服务器|客户端取消订阅请求|
|UNSUBACK|11|服务端到客户端|取消订阅报文确认|
|PINGREQ|12|客户端到服务端|心跳请求|
|PINGRESP|13|服务端到客户端|心跳响应|
|DISCONNECT|14|客户端到服务端|客户断开连接
|Reserver|15|禁止|保留

####标志
byte1  [3-0]包含每个控制报文的类型特定的标志

public 

| 3        |     2   |     1   |    0   |
|:---:     |:-----:  |  :-----:| :----:|
|DUP|QoS|QoS|RETAIN|


-  DUP1 =控制报文的重复分发标志
-  QoS2 = PUBLISH 报文的服务质量等级
- RETAIN3 = PUBLISH 报文的保留标志

